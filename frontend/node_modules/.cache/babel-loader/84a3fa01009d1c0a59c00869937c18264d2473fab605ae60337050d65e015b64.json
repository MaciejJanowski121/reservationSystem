{"ast":null,"code":"var _jsxFileName = \"/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/newreservation.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReservationForm({\n  setReservation\n}) {\n  _s();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [startTime, setStartTime] = useState(\"\");\n  const [endTime, setEndTime] = useState(\"\");\n  const [tableNumber, setTableNumber] = useState(\"\");\n  const [availableTables, setAvailableTables] = useState([]);\n  const navigate = useNavigate();\n\n  // Funkcja do pobierania dostępnych stolików\n  useEffect(() => {\n    const fetchAvailableTables = async () => {\n      if (!startTime || !endTime) return; // tylko jeśli oba pola ustawione\n\n      try {\n        const res = await fetch(`http://localhost:8080/api/reservations/available?start=${startTime}&end=${endTime}`, {\n          credentials: \"include\"\n        });\n        if (!res.ok) throw new Error(\"Fehler beim Laden der verfügbaren Tische\");\n        const data = await res.json();\n        setAvailableTables(data);\n      } catch (err) {\n        console.error(\"Fehler beim Abrufen:\", err);\n        setAvailableTables([]);\n      }\n    };\n    fetchAvailableTables();\n  }, [startTime, endTime]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const newReservation = {\n      tableNumber,\n      reservation: {\n        name,\n        email,\n        phone,\n        startTime,\n        endTime\n      }\n    };\n    try {\n      const response = await fetch(\"http://localhost:8080/api/reservations\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify(newReservation)\n      });\n      if (!response.ok) throw new Error(\"Fehler beim Senden der Reservierung\");\n      const data = await response.json();\n      setReservation([data]);\n\n      // Reset\n      setName(\"\");\n      setEmail(\"\");\n      setPhone(\"\");\n      setStartTime(\"\");\n      setEndTime(\"\");\n      setTableNumber(\"\");\n      navigate(\"/reservations/my\"); // np. po utworzeniu idź na listę\n    } catch (err) {\n      console.error(\"Fehler beim Hinzufügen:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"reservation-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Name\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      placeholder: \"E-Mail\",\n      value: email,\n      onChange: e => setEmail(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"tel\",\n      placeholder: \"Telefonnummer\",\n      value: phone,\n      onChange: e => setPhone(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"datetime-local\",\n      value: startTime,\n      onChange: e => setStartTime(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"datetime-local\",\n      value: endTime,\n      onChange: e => setEndTime(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: tableNumber,\n      onChange: e => setTableNumber(e.target.value),\n      required: true,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"W\\xE4hle einen Tisch...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), availableTables.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: t.tableNumber,\n        children: [\"Tisch \", t.tableNumber, \" (\", t.numberOfSeats, \" Personen)\"]\n      }, t.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Reservieren\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(ReservationForm, \"4vLYgdc/A2Tn7NnascMm6C8S9Gw=\", false, function () {\n  return [useNavigate];\n});\n_c = ReservationForm;\nexport default ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["useState","useEffect","useNavigate","jsxDEV","_jsxDEV","ReservationForm","setReservation","_s","name","setName","email","setEmail","phone","setPhone","startTime","setStartTime","endTime","setEndTime","tableNumber","setTableNumber","availableTables","setAvailableTables","navigate","fetchAvailableTables","res","fetch","credentials","ok","Error","data","json","err","console","error","handleSubmit","e","preventDefault","newReservation","reservation","response","method","headers","body","JSON","stringify","onSubmit","className","children","type","placeholder","value","onChange","target","required","fileName","_jsxFileName","lineNumber","columnNumber","map","t","numberOfSeats","id","_c","$RefreshReg$"],"sources":["/Users/maciejjanowski/Desktop/reservationSystem/frontend/src/components/ReservationForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/newreservation.css\";\n\nfunction ReservationForm({ setReservation }) {\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [startTime, setStartTime] = useState(\"\");\n    const [endTime, setEndTime] = useState(\"\");\n    const [tableNumber, setTableNumber] = useState(\"\");\n    const [availableTables, setAvailableTables] = useState([]);\n\n    const navigate = useNavigate();\n\n    // Funkcja do pobierania dostępnych stolików\n    useEffect(() => {\n        const fetchAvailableTables = async () => {\n            if (!startTime || !endTime) return; // tylko jeśli oba pola ustawione\n\n            try {\n                const res = await fetch(\n                    `http://localhost:8080/api/reservations/available?start=${startTime}&end=${endTime}`,\n                    { credentials: \"include\" }\n                );\n                if (!res.ok) throw new Error(\"Fehler beim Laden der verfügbaren Tische\");\n\n                const data = await res.json();\n                setAvailableTables(data);\n            } catch (err) {\n                console.error(\"Fehler beim Abrufen:\", err);\n                setAvailableTables([]);\n            }\n        };\n\n        fetchAvailableTables();\n    }, [startTime, endTime]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const newReservation = {\n            tableNumber,\n            reservation: { name, email, phone, startTime, endTime },\n        };\n\n        try {\n            const response = await fetch(\"http://localhost:8080/api/reservations\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                credentials: \"include\",\n                body: JSON.stringify(newReservation),\n            });\n\n            if (!response.ok) throw new Error(\"Fehler beim Senden der Reservierung\");\n\n            const data = await response.json();\n            setReservation([data]);\n\n            // Reset\n            setName(\"\");\n            setEmail(\"\");\n            setPhone(\"\");\n            setStartTime(\"\");\n            setEndTime(\"\");\n            setTableNumber(\"\");\n\n            navigate(\"/reservations/my\"); // np. po utworzeniu idź na listę\n        } catch (err) {\n            console.error(\"Fehler beim Hinzufügen:\", err);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"reservation-form\">\n            <input type=\"text\" placeholder=\"Name\" value={name} onChange={(e) => setName(e.target.value)} required />\n            <input type=\"email\" placeholder=\"E-Mail\" value={email} onChange={(e) => setEmail(e.target.value)} required />\n            <input type=\"tel\" placeholder=\"Telefonnummer\" value={phone} onChange={(e) => setPhone(e.target.value)} required />\n\n            <input type=\"datetime-local\" value={startTime} onChange={(e) => setStartTime(e.target.value)} required />\n            <input type=\"datetime-local\" value={endTime} onChange={(e) => setEndTime(e.target.value)} required />\n\n            <select value={tableNumber} onChange={(e) => setTableNumber(e.target.value)} required>\n                <option value=\"\">Wähle einen Tisch...</option>\n                {availableTables.map((t) => (\n                    <option key={t.id} value={t.tableNumber}>\n                        Tisch {t.tableNumber} ({t.numberOfSeats} Personen)\n                    </option>\n                ))}\n            </select>\n\n            <button type=\"submit\">Reservieren</button>\n        </form>\n    );\n}\n\nexport default ReservationForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}